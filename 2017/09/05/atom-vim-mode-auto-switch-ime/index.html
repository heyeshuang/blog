<!doctype html><html lang=zh><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=description content><meta name=generator content="Hugo 0.63.2"><title>Auto-Switch IME in Vim-Mode-Plus for Atom Editor &#183; 贺叶霜的树：III</title><link rel=stylesheet href=//cdn.jsdelivr.net/npm/purecss@1.0.0/build/pure-min.css><!--[if lte IE 8]><link rel=stylesheet href=//cdn.jsdelivr.net/npm/purecss@1.0.0/build/grids-responsive-old-ie-min.css><![endif]--><!--[if gt IE 8]><!--><link rel=stylesheet href=//cdn.jsdelivr.net/npm/purecss@1.0.0/build/grids-responsive-min.css><!--<![endif]--><!--[if lte IE 8]><link rel=stylesheet href=https://blog.heysh.xyz/css/side-menu-old-ie.css><![endif]--><!--[if gt IE 8]><!--><link rel=stylesheet href=https://blog.heysh.xyz/css/side-menu.css><!--<![endif]--><link rel=stylesheet href=https://blog.heysh.xyz/css/blackburn.css><link rel=stylesheet href=//cdn.jsdelivr.net/npm/font-awesome@4.7.0/css/font-awesome.min.css><link href=//cdn.jsdelivr.net/npm/raleway-webfont@3.0.1/raleway.min.css rel=stylesheet type=text/css><link rel=stylesheet href=//cdn.jsdelivr.net/npm/katex@0.10.0/dist/katex.min.css integrity=sha384-9eLZqc9ds8eNjO3TmqPeYcDj8n+Qfa4nuSiGYa6DjLNcv9BtN69ZIulL9+8CqC9Y crossorigin=anonymous><script defer src=//cdn.jsdelivr.net/npm/katex@0.10.0/dist/katex.min.js integrity=sha384-K3vbOmF2BtaVai+Qk37uypf7VrgBubhQreNQe9aGsz9lB63dIFiQVlJbr92dw2Lx crossorigin=anonymous></script><script defer src=//cdn.jsdelivr.net/npm/katex@0.10.0/dist/contrib/auto-render.min.js integrity=sha384-kmZOZB5ObwgQnS/DuDg6TScgOiWWBiVt0plIRkZCmE6rDZGrEOQeHM5PcHi+nyqe crossorigin=anonymous onload=renderMathInElement(document.body);></script><link rel="shortcut icon" href=https://blog.heysh.xyz/img/favicon.ico type=image/x-icon><link rel=stylesheet href=https://blog.heysh.xyz/css/typo.css><link rel=stylesheet href=https://blog.heysh.xyz/css/custom.css></head><body><div id=layout><a href=#menu id=menuLink class=menu-link><i class="fa fa-bars"></i></a><div id=menu><a class="pure-menu-heading brand" href=/>Rei III</a><div class=pure-menu><ul class=pure-menu-list><li class=pure-menu-item><a class=pure-menu-link href=/post/><i class="fa fa-list fa-fw"></i>Posts</a></li><li class=pure-menu-item><a class=pure-menu-link href=/categories/><i class="fa fa-folder fa-fw"></i>Categories</a></li><li class=pure-menu-item><a class=pure-menu-link href=/tags/><i class="fa fa-tags fa-fw"></i>Tags</a></li><li class=pure-menu-item><a class=pure-menu-link href=/about/><i class="fa fa-user fa-fw"></i>About</a></li><li class=pure-menu-item><a class=pure-menu-link href=/wallet/><i class="fa fa-money fa-fw"></i>Begging</a></li><li class=pure-menu-item><a class=pure-menu-link href=https://heysh.xyz/><i class="fa fa-pagelines fa-fw"></i>Bud</a></li><li class=pure-menu-item><a class=pure-menu-link href=/sentences/><i class="fa fa-video-camera fa-fw"></i>Theatre</a></li></ul></div><div class="pure-menu social"><ul class=pure-menu-list><li class=pure-menu-item><a class=pure-menu-link href=https://twitter.com/heyeshuang rel=me target=_blank><i class="fa fa-twitter-square fa-fw"></i>Twitter</a></li><li class=pure-menu-item><a class=pure-menu-link href=https://github.com/heyeshuang rel=me target=_blank><i class="fa fa-github-square fa-fw"></i>GitHub</a></li></ul></div><div><div class=small-print><small>&copy;<a href=https://creativecommons.org/licenses/by-sa/4.0/deed.zh>CC BY-SA</a></small></div><div class=small-print><small>Built with&nbsp;<a href=https://gohugo.io/ target=_blank>Hugo</a></small>
<small>Theme&nbsp;<a href=https://github.com/yoshiharuyamashita/blackburn target=_blank>Blackburn</a></small></div></div></div><div id=main><div class=header><h1>Auto-Switch IME in Vim-Mode-Plus for Atom Editor</h1><h2></h2></div><div class=content><div class=post-meta><div><i class="fa fa-calendar fa-fw"></i><time>2017-09-05 21:03</time></div><div><i class="fa fa-tags fa-fw"></i><a class=post-taxonomy-tag href=https://blog.heysh.xyz/tags/atom>atom</a>&nbsp;/
<a class=post-taxonomy-tag href=https://blog.heysh.xyz/tags/vim>vim</a>&nbsp;/
<a class=post-taxonomy-tag href=https://blog.heysh.xyz/tags/python>python</a></div></div><p>Update 2018-5: Now vim-mode-plus introduced <a href=https://github.com/t9md/atom-vim-mode-plus/blob/master/CHANGELOG.md#1300>new method</a> to disable IME in the setting page. It&rsquo;s time for this post to retire.</p><hr><p>As a vim-user and Chinese-speaker, I prefer <a href=https://atom.io/packages/vim-mode-plus>vim-mode-plus</a> for Atom editor, but always disrupted by the IME in normal mode, like this:</p><p><img src=/IME-in-atom.png alt=IME-in-atom></p><p>If we could <a href=https://github.com/t9md/atom-vim-mode-plus/issues/446>disable IMEs in normal mode</a> then everything will be fine again. However, due to <a href=https://github.com/atom/atom/issues/1092>the lack of the APIs</a>, it is hardly possible to solve the problem in the editor.</p><p>Thus, we could solve it <em>out of the box</em>. There is a package named <a href=https://atom.io/packages/vim-mode-plus-auto-ime>atom-vim-mode-plus-auto-ime</a>, which could run a custom command when the mode changes. The goal now is to find some commands to control the IME:</p><ul><li>macOS users can use <a href=https://github.com/vovkasm/input-source-switcher>input-source-switcher</a> to toogle the IME.</li><li>For Linux, the IME <code>fcitx</code> has a command <code>fcitx-remote</code> to control itself.</li><li>And for Windows, I wrote a <a href=https://github.com/heyeshuang/ime_helper>python script</a> to switch the IME of the <em>foreground window</em>.</li></ul><p>Then we could configure this package.</p><div class=highlight><pre style=background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=color:#09f;font-style:italic>#windows:</span>
python E:<span style=color:#c30;font-weight:700>\\</span>path<span style=color:#c30;font-weight:700>\\</span>to<span style=color:#c30;font-weight:700>\\</span>ime_helper.py --current <span style=color:#09f;font-style:italic>#Get Current Input Source</span>
python E:<span style=color:#c30;font-weight:700>\\</span>path<span style=color:#c30;font-weight:700>\\</span>to<span style=color:#c30;font-weight:700>\\</span>ime_helper.py --dec <span style=color:#a00>${</span><span style=color:#033>source</span><span style=color:#a00>}</span> <span style=color:#09f;font-style:italic>#insert</span>
python E:<span style=color:#c30;font-weight:700>\\</span>path<span style=color:#c30;font-weight:700>\\</span>to<span style=color:#c30;font-weight:700>\\</span>ime_helper.py --locale en_US <span style=color:#09f;font-style:italic>#normal</span>
python E:<span style=color:#c30;font-weight:700>\\</span>path<span style=color:#c30;font-weight:700>\\</span>to<span style=color:#c30;font-weight:700>\\</span>ime_helper.py --locale en_US <span style=color:#09f;font-style:italic>#visual</span>
<span style=color:#09f;font-style:italic>#linux:</span>
/usr/bin/fcitx-remote <span style=color:#09f;font-style:italic>#Get Current Input Source</span>
<span style=color:#069;font-weight:700>if</span> <span style=color:#555>(</span><span style=color:#555>(</span> <span style=color:#c30>&#34;</span><span style=color:#a00>${</span><span style=color:#033>source</span><span style=color:#a00>}</span><span style=color:#c30>&#34;</span> &lt;<span style=color:#555>=</span> <span style=color:#c30>&#34;1&#34;</span> <span style=color:#555>)</span><span style=color:#555>)</span>;<span style=color:#069;font-weight:700>then</span> /usr/bin/fcitx-remote -c; <span style=color:#069;font-weight:700>else</span> /usr/bin/fcitx-remote -o ;<span style=color:#069;font-weight:700>fi</span> <span style=color:#09f;font-style:italic>#insert</span>
/usr/bin/fcitx-remote -c <span style=color:#09f;font-style:italic>#normal</span>
/usr/bin/fcitx-remote -c <span style=color:#09f;font-style:italic>#visual</span>
<span style=color:#09f;font-style:italic>#macOS: just use the default config</span>
</code></pre></div><p><img src=/atom-vim-configure.png alt=configure></p><div class="prev-next-post pure-g"><div class=pure-u-1-24 style=text-align:left><a href=https://blog.heysh.xyz/2017/09/03/2017-09-03-ipv6-for-unicomm/><i class="fa fa-chevron-left"></i></a></div><div class=pure-u-10-24><nav class=prev><a href=https://blog.heysh.xyz/2017/09/03/2017-09-03-ipv6-for-unicomm/>短消息：联通IPV6</a></nav></div><div class=pure-u-2-24>&nbsp;</div><div class=pure-u-10-24><nav class=next><a href=https://blog.heysh.xyz/2017/09/06/gossip_about_ime_helper/>关于那个IME helper</a></nav></div><div class=pure-u-1-24 style=text-align:right><a href=https://blog.heysh.xyz/2017/09/06/gossip_about_ime_helper/><i class="fa fa-chevron-right"></i></a></div></div><link rel=stylesheet href=https://blog.heysh.xyz/css/iDisqus.min.css><div id=comment></div><script src=https://blog.heysh.xyz/js/iDisqus.min.js></script><script>var disq=new iDisqus('comment',{forum:'heysh',api:'https:\/\/disqus-php.yeshuanghe.now.sh\/api',site:'https:\/\/blog.heysh.xyz',mode:1,timeout:3000,init:true});</script></div></div></div><script src=https://blog.heysh.xyz/js/ui.js></script><script src=https://blog.heysh.xyz/js/menus.js></script><script>if(window.location.hostname!="localhost"){(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)})(window,document,'script','//www.google-analytics.com/analytics.js','ga');ga('create','UA-40522664-1','auto');ga('send','pageview');}</script><script>(function(u,c){var d=document,t='script',o=d.createElement(t),s=d.getElementsByTagName(t)[0];o.src=u;if(c){o.addEventListener('load',function(e){c(e);});}
s.parentNode.insertBefore(o,s);})('//cdn.jsdelivr.net/npm/pangu@3.3.0/dist/browser/pangu.min.js',function(){pangu.spacingPage();});</script></body></html>