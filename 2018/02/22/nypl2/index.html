<!DOCTYPE html>
<html lang="zh">

<head>
  <meta http-equiv="content-type" content="text/html; charset=utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="description" content="">
  <meta name="generator" content="Hugo 0.57.0-DEV" />

  <title>这次是纽约公共图书馆……的第二天！ &middot; 贺叶霜的树：III</title>

  
  
  <link rel="stylesheet" href="//cdn.jsdelivr.net/npm/purecss@1.0.0/build/pure-min.css">

  <!--[if lte IE 8]>
  <link rel="stylesheet" href="//cdn.jsdelivr.net/npm/purecss@1.0.0/build/grids-responsive-old-ie-min.css">
  <![endif]-->
  <!--[if gt IE 8]><!-->
  <link rel="stylesheet" href="//cdn.jsdelivr.net/npm/purecss@1.0.0/build/grids-responsive-min.css">
  <!--<![endif]-->

  <!--[if lte IE 8]>
  <link rel="stylesheet" href="https://blog.heysh.xyz/css/side-menu-old-ie.css">
  <![endif]-->
  <!--[if gt IE 8]><!-->
  <link rel="stylesheet" href="https://blog.heysh.xyz/css/side-menu.css">
  <!--<![endif]-->

  <link rel="stylesheet" href="https://blog.heysh.xyz/css/blackburn.css">

  
  <link rel="stylesheet" href="//cdn.jsdelivr.net/npm/font-awesome@4.7.0/css/font-awesome.min.css">

  
  <link href="//cdn.jsdelivr.net/npm/raleway-webfont@3.0.1/raleway.min.css" rel="stylesheet" type="text/css">

  
    <link rel="stylesheet" href="//cdn.jsdelivr.net/npm/katex@0.10.0/dist/katex.min.css" integrity="sha384-9eLZqc9ds8eNjO3TmqPeYcDj8n+Qfa4nuSiGYa6DjLNcv9BtN69ZIulL9+8CqC9Y"
        crossorigin="anonymous">
    
    <script defer src="//cdn.jsdelivr.net/npm/katex@0.10.0/dist/katex.min.js" integrity="sha384-K3vbOmF2BtaVai+Qk37uypf7VrgBubhQreNQe9aGsz9lB63dIFiQVlJbr92dw2Lx"
        crossorigin="anonymous"></script>
    
    <script defer src="//cdn.jsdelivr.net/npm/katex@0.10.0/dist/contrib/auto-render.min.js" integrity="sha384-kmZOZB5ObwgQnS/DuDg6TScgOiWWBiVt0plIRkZCmE6rDZGrEOQeHM5PcHi+nyqe"
        crossorigin="anonymous"
        onload="renderMathInElement(document.body);"></script>

 
  

  <link rel="shortcut icon" href="https://blog.heysh.xyz/img/favicon.ico" type="image/x-icon" />

  
    
        <link rel="stylesheet" href="https://blog.heysh.xyz/css/typo.css">
    
  
    
        <link rel="stylesheet" href="https://blog.heysh.xyz/css/custom.css">
    
  
  

</head>


<body>
<div id="layout">

  
<a href="#menu" id="menuLink" class="menu-link">
  <i class="fa fa-bars"></i>
</a>
<div id="menu">

  
  <a class="pure-menu-heading brand" href="/">Rei III</a>


  <div class="pure-menu">
    <ul class="pure-menu-list">
      
      
        <li class="pure-menu-item">
          <a class="pure-menu-link" href="/post/"><i class='fa fa-list fa-fw'></i>Posts</a>
      
        </li>
      
      
        <li class="pure-menu-item">
          <a class="pure-menu-link" href="/categories/"><i class='fa fa-folder fa-fw'></i>Categories</a>
      
        </li>
      
      
        <li class="pure-menu-item">
          <a class="pure-menu-link" href="/tags/"><i class='fa fa-tags fa-fw'></i>Tags</a>
      
        </li>
      
      
        <li class="pure-menu-item">
          <a class="pure-menu-link" href="/about/"><i class='fa fa-user fa-fw'></i>About</a>
      
        </li>
      
      
        <li class="pure-menu-item">
          <a class="pure-menu-link" href="/wallet/"><i class='fa fa-money fa-fw'></i>Begging</a>
      
        </li>
      
      
        <li class="pure-menu-item">
          <a class="pure-menu-link" href="https://heysh.xyz/"><i class='fa fa-pagelines fa-fw'></i>Bud</a>
      
        </li>
      
      
        <li class="pure-menu-item">
          <a class="pure-menu-link" href="/sentences/"><i class='fa fa-video-camera fa-fw'></i>Theatre</a>
      
        </li>
      
    </ul>
  </div>

  <div class="pure-menu social">
  <ul class="pure-menu-list">

    

    

    
    <li class="pure-menu-item">
      <a class="pure-menu-link" href="https://twitter.com/heyeshuang" target="_blank"><i class="fa fa-twitter-square fa-fw"></i>Twitter</a>
    </li>
    

    

    

    
    <li class="pure-menu-item">
      <a class="pure-menu-link" href="https://plus.google.com/+%e8%b4%ba%e5%8f%b6%e9%9c%9cHeYSH" target="_blank"><i class="fa fa-google-plus-square fa-fw"></i>Google+</a>
    </li>
    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    
    <li class="pure-menu-item">
      <a class="pure-menu-link" href="https://github.com/heyeshuang" target="_blank"><i class="fa fa-github-square fa-fw"></i>GitHub</a>
    </li>
    

    

    

    

    

    

    

    

    

    

    

    

    

  </ul>
</div>


  <div>
  <div class="small-print">
    <small>&copy;<a href="https://creativecommons.org/licenses/by-sa/4.0/deed.zh">CC BY-SA</a></small>
  </div>
  <div class="small-print">
    <small>Built with&nbsp;<a href="https://gohugo.io/" target="_blank">Hugo</a></small>
    <small>Theme&nbsp;<a href="https://github.com/yoshiharuyamashita/blackburn" target="_blank">Blackburn</a></small>
  </div>
</div>

</div>


  <div id="main">


<div class="header">
  <h1>这次是纽约公共图书馆……的第二天！</h1>
  <h2></h2>
</div>
<div class="content">

  <div class="post-meta">

  <div>
    <i class="fa fa-calendar fa-fw"></i>
    <time>2018-02-22 16:03</time>
  </div>

  

  

  
  
  
  <div>
    <i class="fa fa-tags fa-fw"></i>
    
      <a class="post-taxonomy-tag" href="https://blog.heysh.xyz/tags/%E7%BA%BD%E7%BA%A6%E5%85%AC%E4%BC%97%E5%9B%BE%E4%B9%A6%E9%A6%86">纽约公众图书馆</a>&nbsp;&#47;
    
      <a class="post-taxonomy-tag" href="https://blog.heysh.xyz/tags/%E7%B4%A0%E6%9D%90">素材</a>
    
  </div>
  
  

</div>


  <blockquote>
<p>（精神上）坐在图书馆里，我想：能不能把这些旧书借走呢？</p>
</blockquote>

<p>当然是可以的！贴心的图书管理员已经提供了API接口：<a href="http://api.repo.nypl.org/">http://api.repo.nypl.org/</a>，申请账号之后，就可以做各种各样的事了~</p>

<p>当然，如果只是想下片的话，用<a href="https://github.com/NYPL-publicdomain/api-client">digital-collections</a>可能会更简单一些：</p>
<div class="highlight"><pre style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">digital-collections -t API_TOKEN -s UUID -o OUTPUT.json</code></pre></div>
<p>其中，<code>API_TOKEN</code>在申请账号以后会得到一个；在你想要下载的专辑（<a href="https://digitalcollections.nypl.org/collections/a-curious-herbal-containing-five-hundred-cuts-of-the-most-useful-plants-which#/?tab=about&amp;scroll=50">比如这个</a>）下面，可以看到<code>UUID</code>；运行这条命令之后，图片的信息列表会保存在<code>OUTPUT.json</code>里。</p>

<figure>
    <img src="/nypl/clip.png"/> <figcaption>
            <h4>对，就是那个Universal Unique Identifier</h4>
        </figcaption>
</figure>


<p>之后，获得的json文件大概像是这样：</p>
<div class="highlight"><pre style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-json" data-lang="json">{
	<span style="color:#309;font-weight:bold">&#34;uuid&#34;</span>: <span style="color:#c30">&#34;510d47dd-c1f5-a3d9-e040-e00a18064a99&#34;</span>,
	<span style="color:#309;font-weight:bold">&#34;imageLinks&#34;</span>: {
		<span style="color:#309;font-weight:bold">&#34;imageLink&#34;</span>: [
			<span style="color:#c30">&#34;http://images.nypl.org/index.php?id=1125721&amp;t=w&amp;download=1&amp;suffix=510d47dd-c1f5-a3d9-e040-e00a18064a99.001&#34;</span>,
			<span style="color:#c30">&#34;http://images.nypl.org/index.php?id=1125721&amp;t=r&amp;download=1&amp;suffix=510d47dd-c1f5-a3d9-e040-e00a18064a99.001&#34;</span>,
			<span style="color:#c30">&#34;http://images.nypl.org/index.php?id=1125721&amp;t=t&amp;download=1&amp;suffix=510d47dd-c1f5-a3d9-e040-e00a18064a99.001&#34;</span>,
			<span style="color:#c30">&#34;http://images.nypl.org/index.php?id=1125721&amp;t=b&amp;download=1&amp;suffix=510d47dd-c1f5-a3d9-e040-e00a18064a99.001&#34;</span>,
			<span style="color:#c30">&#34;http://images.nypl.org/index.php?id=1125721&amp;t=f&amp;download=1&amp;suffix=510d47dd-c1f5-a3d9-e040-e00a18064a99.001&#34;</span>
		]
	},
	<span style="color:#309;font-weight:bold">&#34;apiUri&#34;</span>: <span style="color:#c30">&#34;http://api.repo.nypl.org/api/v1/items/mods/510d47dd-c1f5-a3d9-e040-e00a18064a99&#34;</span>,
	<span style="color:#309;font-weight:bold">&#34;typeOfResource&#34;</span>: <span style="color:#c30">&#34;still image&#34;</span>,
	<span style="color:#309;font-weight:bold">&#34;imageID&#34;</span>: <span style="color:#c30">&#34;1125721&#34;</span>,
	<span style="color:#309;font-weight:bold">&#34;sortString&#34;</span>: <span style="color:#c30">&#34;0000000001|0000000002|0000000001&#34;</span>,
	<span style="color:#309;font-weight:bold">&#34;itemLink&#34;</span>: <span style="color:#c30">&#34;http://digitalcollections.nypl.org/items/510d47dd-c1f5-a3d9-e040-e00a18064a99&#34;</span>,
	<span style="color:#309;font-weight:bold">&#34;highResLink&#34;</span>: <span style="color:#c30">&#34;http://link.nypl.org/7nC9VyT_TJWvGX9_H0mYBQ8&#34;</span>,
	<span style="color:#309;font-weight:bold">&#34;title&#34;</span>: <span style="color:#c30">&#34;Dandelion.&#34;</span>,
	<span style="color:#309;font-weight:bold">&#34;dateDigitized&#34;</span>: <span style="color:#c30">&#34;2016-08-04T04:53:12Z&#34;</span>,
	<span style="color:#309;font-weight:bold">&#34;rightsStatement&#34;</span>: <span style="color:#c30">&#34;The New York Public Library believes that this item is in the public domain under the laws of the United States, but did not make a determination as to its copyright status under the copyright laws of other countries. This item may not be in the public domain under the laws of other countries. Though not required, if you want to credit us as the source, please use the following statement, \&#34;From The New York Public Library,\&#34; and provide a link back to the item on our Digital Collections site. Doing so helps us track how our collection is used and helps justify freely releasing even more content in the future.&#34;</span>,
	<span style="color:#309;font-weight:bold">&#34;rightsStatementURI&#34;</span>: <span style="color:#c30">&#34;http://rightsstatements.org/vocab/NoC-US/1.0/&#34;</span>
}</code></pre></div>
<p>之后，只要下载<code>imageLink</code>就好了。我用了一个简单的python脚本来做这件事。</p>
<div class="highlight"><pre style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python"><span style="color:#09f;font-style:italic"># 注意：这玩意没有经过测试，可能会爆炸</span>
<span style="color:#09f;font-style:italic"># 啊对了，而且是python3.6</span>
<span style="color:#069;font-weight:bold">import</span> <span style="color:#0cf;font-weight:bold">urllib.request</span> <span style="color:#069;font-weight:bold">as</span> <span style="color:#0cf;font-weight:bold">ur</span>
<span style="color:#069;font-weight:bold">import</span> <span style="color:#0cf;font-weight:bold">json</span>
<span style="color:#069;font-weight:bold">import</span> <span style="color:#0cf;font-weight:bold">os</span>

dir_name<span style="color:#555">=</span><span style="color:#c30">&#34;Himalayan_plants&#34;</span> <span style="color:#09f;font-style:italic">#可能要改这里……</span>
os<span style="color:#555">.</span>mkdir(dir_name)
<span style="color:#069;font-weight:bold">with</span> <span style="color:#366">open</span>(<span style="color:#c30">&#34;OUTPUT.json&#34;</span>,<span style="color:#c30">&#34;r&#34;</span>) <span style="color:#069;font-weight:bold">as</span> source: <span style="color:#09f;font-style:italic">#……还有这里</span>
    source_dict<span style="color:#555">=</span>json<span style="color:#555">.</span>load(source)

<span style="color:#069;font-weight:bold">for</span> _i,_s <span style="color:#000;font-weight:bold">in</span> <span style="color:#366">enumerate</span>(source_dict):
    file_name<span style="color:#555">=</span>dir_name<span style="color:#555">+</span><span style="color:#c30">&#34;/&#34;</span><span style="color:#555">+</span><span style="color:#366">str</span>(_i)<span style="color:#555">+</span><span style="color:#c30">&#34;.jpg&#34;</span>
    <span style="color:#069;font-weight:bold">if</span> os<span style="color:#555">.</span>path<span style="color:#555">.</span>exists(file_name)<span style="color:#555">==</span>False:
        <span style="color:#069;font-weight:bold">try</span>:
            ur<span style="color:#555">.</span>urlretrieve(_s[<span style="color:#c30">&#34;imageLinks&#34;</span>][<span style="color:#c30">&#34;imageLink&#34;</span>][<span style="color:#f60">0</span>],file_name)
        <span style="color:#069;font-weight:bold">except</span> <span style="color:#c00;font-weight:bold">Exception</span> <span style="color:#069;font-weight:bold">as</span> e:
            <span style="color:#069;font-weight:bold">print</span>(_i)
            <span style="color:#069;font-weight:bold">print</span>(<span style="color:#366">str</span>(e))</code></pre></div>

  
<div class="prev-next-post pure-g">
  <div class="pure-u-1-24" style="text-align: left;">
    
    <a href="https://blog.heysh.xyz/2018/02/21/nypl/"><i class="fa fa-chevron-left"></i></a>
    
  </div>
  <div class="pure-u-10-24">
    
    <nav class="prev">
      <a href="https://blog.heysh.xyz/2018/02/21/nypl/">这次是纽约公共图书馆……</a>
    </nav>
    
  </div>
  <div class="pure-u-2-24">
    &nbsp;
  </div>
  <div class="pure-u-10-24">
    
    <nav class="next">
      <a href="https://blog.heysh.xyz/2018/02/24/nypl3/">这次是纽约公共图书馆……而且居然还有第三部分？</a>
    </nav>
    
  </div>
  <div class="pure-u-1-24" style="text-align: right;">
    
    <a href="https://blog.heysh.xyz/2018/02/24/nypl3/"><i class="fa fa-chevron-right"></i></a>
    
  </div>
</div>



  <script src="//cdn1.lncld.net/static/js/3.0.4/av-min.js"></script>
<script src="//cdn.jsdelivr.net/npm/valine/dist/Valine.min.js"></script>
<div id="vcomments"></div>
<script>
    new Valine({
        el: '#vcomments',
        appId: 't7xAhuTsStq91vofdFBaMyoG-gzGzoHsz',
        appKey: 'NdrP2qik4G319EwHthKo9lSC',
        placeholder: '歪，在吗？',
        notify: true,
        visitor: true,
    })
</script>

</div>

</div>
</div>
<script src="https://blog.heysh.xyz/js/ui.js"></script>
<script src="https://blog.heysh.xyz/js/menus.js"></script>


<script>
  
  if (window.location.hostname != "localhost") {
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
    (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
    m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-40522664-1', 'auto');
    ga('send', 'pageview');
  }
</script>







<script>
(function(u, c) {
  var d = document, t = 'script', o = d.createElement(t),
      s = d.getElementsByTagName(t)[0];
  o.src = u;
  if (c) { o.addEventListener('load', function(e) { c(e); }); }
  s.parentNode.insertBefore(o, s);
})('//cdn.jsdelivr.net/npm/pangu@3.3.0/dist/browser/pangu.min.js', function() {
  pangu.spacingPage();
});
</script>

</body>
</html>

