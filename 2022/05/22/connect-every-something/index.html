<!doctype html><html lang=zh-cn><head><meta charset=utf-8><meta http-equiv=X-UA-Compatible content="IE=edge,chrome=1"><title>林中阴影 | 几物互联</title>
<meta name=viewport content="width=device-width,minimum-scale=1"><meta name=generator content="Hugo 0.133.1"><meta name=ROBOTS content="INDEX, FOLLOW"><link href=/dist/app.css rel=stylesheet><link rel="shortcut icon" href=https://blog.heysh.xyz/img/favicon.png type=image/png><script async src="https://www.googletagmanager.com/gtag/js?id=G-CWBXLVG90W"></script><script>var dnt,doNotTrack=!1;if(!1&&(dnt=navigator.doNotTrack||window.doNotTrack||navigator.msDoNotTrack,doNotTrack=dnt=="1"||dnt=="yes"),!doNotTrack){window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag("js",new Date),gtag("config","G-CWBXLVG90W")}</script><link rel=stylesheet href=https://blog.heysh.xyz/lib/katex.min.css crossorigin=anonymous><script defer src=https://blog.heysh.xyz/lib/katex.min.js crossorigin=anonymous></script><script defer src=https://blog.heysh.xyz/lib/contrib/auto-render.min.js crossorigin=anonymous onload=renderMathInElement(document.body)></script><script>document.addEventListener("DOMContentLoaded",function(){renderMathInElement(document.body,{delimiters:[{left:"$$",right:"$$",display:!0},{left:"$",right:"$",display:!1}]})})</script><script>(function(e,t){var s=document,o="script",n=s.createElement(o),i=s.getElementsByTagName(o)[0];n.src=e,t&&n.addEventListener("load",function(e){t(e)}),i.parentNode.insertBefore(n,i)})("https://blog.heysh.xyz/lib/pangu.min.js",function(){pangu.spacingPage()})</script><style type=text/css media="screen, print">@font-face{font-family:fancytitlefont;font-style:normal;font-display:swap;src:url(https://blog.heysh.xyz/fonts/%E6%9D%A8%E4%BB%BB%E4%B8%9C%E7%AB%B9%E7%9F%B3%E4%BD%93-Light.woff2)format('woff2'),url(https://blog.heysh.xyz/fonts/%E6%9D%A8%E4%BB%BB%E4%B8%9C%E7%AB%B9%E7%9F%B3%E4%BD%93-Light.woff)format('woff')}@font-face{font-family:noto serif cjk sc;font-style:normal;font-weight:300;font-display:swap;src:local('Noto Serif CJK SC Light'),local('NotoSerifCJK-Light'),url(https://blog.heysh.xyz/fonts/noto-serif-sc-v7-latin_chinese-simplified-300.woff2)format('woff2'),url(https://blog.heysh.xyz/fonts/noto-serif-sc-v7-latin_chinese-simplified-300.woff)format('woff')}@font-face{font-family:noto serif cjk sc;font-style:normal;font-weight:400;font-display:swap;src:local('Noto Serif CJK SC'),local('NotoSerifCJK-Regular'),url(https://blog.heysh.xyz/fonts/noto-serif-sc-v7-latin_chinese-simplified-regular.woff2)format('woff2'),url(https://blog.heysh.xyz/fonts/noto-serif-sc-v7-latin_chinese-simplified-regular.woff)format('woff')}@font-face{font-family:noto serif cjk sc;font-style:normal;font-weight:500;font-display:swap;src:local('Noto Serif CJK SC Medium'),local('NotoSerifCJK-Medium'),url(https://blog.heysh.xyz/fonts/noto-serif-sc-v7-latin_chinese-simplified-500.woff2)format('woff2'),url(https://blog.heysh.xyz/fonts/noto-serif-sc-v7-latin_chinese-simplified-500.woff)format('woff')}</style></head><body class="bg-gray-100 text-gray-700 font-sans"><div class="p-6 sm:p-10 md:p-16 flex flex-wrap"><header class="w-full md:w-2/5 xl:w-1/2 md:pr-12 lg:pr-20 xl:pr-24 order-1 md:order-1 max-w-2xl"><div class="z-50 bg-gray-100 bg-opacity-75 bg-opacity-custom lg:min-w-0.7 max-w-xl md:float-right md:text-right leading-loose tracking-tight md:sticky md:top-0 pt-2"><div><h2><a href=https://blog.heysh.xyz/ title=林中阴影 class="heading font-cursive icon">林中阴影</a></h2></div><h1 class=pt-2>几物互联</h1><h3 class="text-java-700 font-normal leading-relaxed pt-2">或者叫多设备同步</h3><div class="flex flex-wrap justify-end pt-2"><div class="md:flex-grow-0 font-light"><a class="post-taxonomy-category text-medium-red-violet-600 hover:text-medium-red-violet-400" href=/categories/%E6%8A%98%E8%85%BE>折腾</a>
&nbsp;&nbsp;
<a class="post-taxonomy-tag text-eucalyptus-500" href=/tags/syncthing>Syncthing</a>&nbsp;/
<a class="post-taxonomy-tag text-eucalyptus-500" href=/tags/zotero>Zotero</a>&nbsp;/
<a class="post-taxonomy-tag text-eucalyptus-500" href=/tags/joplin>Joplin</a>&nbsp;/
<a class="post-taxonomy-tag text-eucalyptus-500" href=/tags/%E5%86%85%E7%BD%91>内网</a>&nbsp;/
<a class="post-taxonomy-tag text-eucalyptus-500" href=/tags/%E7%AC%94%E8%AE%B0>笔记</a></div><time class="text-eucalyptus-500 md:text-right md:flex-grow font-light pl-4" datetime=2022-05-22T22:45:39+08:00>2022-5-22 22:45</time></div><details class=toc open><summary><hr></summary><div class="inline toc-content"><nav id=TableOfContents><ul><li><a href=#同步存储syncthing>同步存储：Syncthing</a></li><li><a href=#笔记软件与文献管理>笔记软件与文献管理</a><ul><li><a href=#joplin内部>Joplin内部</a></li><li><a href=#笔记引用zotero参考文献>笔记引用Zotero参考文献</a></li><li><a href=#引用计算机上的其他内容>引用计算机上的其他内容</a></li></ul></li><li><a href=#随处ctrlv以及传文件>随处Ctrl+V，以及传文件</a></li><li><a href=#远程访问tailscaletinc或wireguard>远程访问：Tailscale、Tinc或Wireguard</a></li></ul></nav></div></details><hr></div></header><main role=main class="w-full md:w-3/5 xl:w-1/2 max-w-3xl order-2 md:order-2 min-h-70vh pt-2 pb-4"><article><section class="mx-auto content"><div class=c-rich-text><blockquote><p>我被封在外面了。这种时候非常想念192.168.1.1……也非常适合写博客来回忆熟悉的网络。</p></blockquote><p>无论是在家里的组装机还是漂泊的笔记本，在工作的时候都能够获得相似的上下文，有的时候甚至可以在家CTRL+C，在公司CTRL+V。除了<em>鸿蒙</em>系统之外，通过一组软件也是可以实现的。</p><p>本人现在所使用的方案如下。设置难度由易到难排序。</p><h2 id=同步存储syncthing>同步存储：Syncthing</h2><blockquote><p>前置条件：两台（或以上）容量较高的电子设备</p></blockquote><p>比起云存储，个人更倾向于Syncthing这样的本地同步方案：至少文件是属于自己的（而且还不用收钱）。安装也很简单：Windows下安装<a href=https://github.com/canton7/SyncTrayzor>SyncTrayzor</a>，Android下安装<a href=https://github.com/Catfriend1/syncthing-android>Syncthing-Fork</a>，其他系统移步<a href=https://syncthing.net/downloads/>这里</a>就可以。安装完以后，在两边选择工作目录，就可以完成双向同步了。得益于STUN服务器，无论是在内网还是外网，文件都可以完成传输。</p><p>当然，Syncthing也有一定的问题。首先是，因为是进行了同步，同一份文件会在每一个设备上都占用一份空间。在手机这样捉襟见肘的环境下，建议采用“仅发送”模式，只用来备份照片之类的。</p><p>另外，Syncthing在运行的时候必须要两侧的设备保持开机，电费账单+1。在有一方离线的时候，需要注意文件的版本，不要在两边都修改同一个文件。毕竟不是git，合并功能没有那么强。</p><h2 id=笔记软件与文献管理>笔记软件与文献管理</h2><blockquote><p>前置条件：同步的话需要Syncthing，或者云存储。</p></blockquote><p>本人使用<a href=https://joplinapp.org/>Joplin</a>和<a href=https://www.zotero.org/>Zotero</a>来做笔记和进行文献管理，这两款软件都可以使用Syncthing作为同步后端<sup id=fnref:1><a href=#fn:1 class=footnote-ref role=doc-noteref>1</a></sup>，而且都具有笔记功能。我的习惯是，在Joplin上写一些需要较长篇幅的笔记，文献阅读笔记放在Zotero中。</p><p>当然，作为一篇讲“互联”的博文，这两款软件当然也是可以相互连接的。我主要用到下面这些：</p><h3 id=joplin内部>Joplin内部</h3><p>当然Joplin不是为了双链笔记而设计的，但是通过插件<a href=https://github.com/ylc395/joplin-plugin-note-link-system>plugin-note-link-system</a>也可以获得一部分双链笔记的功能，比如说，方便地在一篇笔记里引用另外一篇笔记的某个小标题；或者是在另一篇笔记里看到backlinks。</p><h3 id=笔记引用zotero参考文献>笔记引用Zotero参考文献</h3><p>通过<a href=https://retorque.re/zotero-better-bibtex/>Better BibTeX for Zotero</a>的<code>Quick Copy</code>功能，按下<code>Ctrl+Shift+C</code>，就可以把当前文献复制成类似<code>[xxx](zotero://select/library/items/AAAAAA)</code>的链接。这种方式对别的笔记软件也适用，只要它能够打开<code>URL Scheme</code>。</p><p>如果把链接改写为<code>zotero://open-pdf/library/items/AAAAAA?page=114</code>，可以直接打开文件的第114页。
<img src=p114.png alt=p114></p><p>另外，Calibre也有类似的链接功能。我一般用Calibre来管理那些杂书。</p><p><img src=calibre.png alt=calibre></p><h3 id=引用计算机上的其他内容>引用计算机上的其他内容</h3><p>肯定没有人想把所有文件都塞进笔记本的数据库里，总是要引用一些外部文件的，这时候还是需要用万能的链接。这里的链接格式类似<code>[xxx](file://C:\工作\xxx.docx)</code>，在Windows系统下既有斜杠也有反斜杠，但是很神奇地能够正确找到。</p><p>实际上还有一个问题，通过Syncthing同步后，文件在每台电脑上的链接地址是不一样的。所以，我在每台电脑的C盘做了一个文件夹链接<sup id=fnref:2><a href=#fn:2 class=footnote-ref role=doc-noteref>2</a></sup>。在Powershell下：</p><div class=highlight><pre tabindex=0 style=background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-powershell data-lang=powershell><span style=display:flex><span><span style=color:#366>New-Item</span> -ItemType Junction -Path <span style=color:#c30>&#34;C:\工作&#34;</span> -Target <span style=color:#c30>&#34;C:\实际的\工作\目录&#34;</span>
</span></span></code></pre></div><p>或者也可以用<a href=https://schinagl.priv.at/nt/hardlinkshellext/hardlinkshellext.html>Link Shell Extension</a>来做这件事。之后，在每台电脑上都可以访问<code>C:\工作\xxx.docx</code>了。</p><h2 id=随处ctrlv以及传文件>随处Ctrl+V，以及传文件</h2><blockquote><p>是这样的张总：你在家里的电脑上按了CTRL+C,然后在公司的电脑上再按CTRL+V是肯定不行的。即使同一篇文章也不行。不不，多贵的电脑都不行。</p></blockquote><blockquote><p>前置条件：需要在同一个局域网下面——所以确实不行。</p></blockquote><p>隆重推荐<a href=https://binary-factory.kde.org/job/kdeconnect-kde_Release_win64/>KDE connect</a>，虽然是KDE出品，但是Windows和Android也能用。给手机和电脑装上这个，在同一个局域网下面就可以共享剪贴板了，而且还能够互相传文件。</p><p>不过，有的时候KDE connect找不到局域网设备，这时候我会用Total Commander (Android)的Wifi传输插件，或者是<code>python -m http.server</code>。</p><h2 id=远程访问tailscaletinc或wireguard>远程访问：Tailscale、Tinc或Wireguard</h2><blockquote><p>前置条件：家里24小时开机的矿渣/跳板机/树莓派/NAS；有公网IP的VPS</p></blockquote><p>像<a href=/2021/07/20/beyond-nat/>之前</a>所说的那样，当前，如果我想要在外面访问家里的局域网，我会使用Tinc来建立隧道。运气好（外面有IPv6地址，大多是手机分享Wifi）的时候，可以直接连到自己的、IPv6地址与某个域名绑定的“跳板机”（ARM矿渣）上；运气不好的话，会自动有一台国外VPS进行转发，速度大概在~100K/s。如果用Wireguard的话性能会更好，可是我一直没有找到像Tinc一样简单的节点转发方案。</p><blockquote><p>来自2023年的更新：现在我用回<a href=https://blog.heysh.xyz/2023/05/10/through-nat/>Wireguard</a>了~</p></blockquote><p>连接Tinc之后，就可以通过<code>Wake On LAN</code>唤醒自己的其他电脑，然后用<code>samba</code>、远程桌面之类的软件了。就好象回到家里<del>居家办公</del>一样！</p><p>当然，在这种需求下，最简单的应该是<code>Tailscale</code>，但是由于迫害妄想，我一直没有尝试，而是另外找了类似的东西：</p><details><summary><h4 class=inline>剧透：最后这些我都没用</h4></summary><ul><li><a href=https://github.com/slackhq/nebula>https://github.com/slackhq/nebula</a><ul><li><del>无法通过公共节点转发</del>现在可以了</li><li>两个Android客户端在移动网络、甚至是同一个无线网络都无法连接，离谱</li></ul></li><li><a href=https://github.com/tonarino/innernet>https://github.com/tonarino/innernet</a><ul><li>只实现了STUN，没有实现TURN</li><li>也无法通过公共节点转发</li><li>无Android支持</li></ul></li><li><a href=https://github.com/juanfont/headscale>https://github.com/juanfont/headscale</a><ul><li><del>无Android支持</del></li></ul></li><li><a href=https://github.com/gravitl/netmaker/>https://github.com/gravitl/netmaker/</a><ul><li>构建需要docker和干净的服务器</li></ul></li><li><a href=https://github.com/netbirdio/netbird>https://github.com/netbirdio/netbird</a><ul><li><del>无Android支持</del></li><li>Wireguard客户端无法使用</li></ul></li><li><a href=https://github.com/dswd/vpncloud>vpncloud</a><ul><li>只支持Linux</li></ul></li></ul></details><p>好了，这次我想说的就是这些。办公室冰冷的行军床正在等着我。</p><div class=footnotes role=doc-endnotes><hr><ol><li id=fn:1><p>Joplin使用<code>File System</code>作为同步目标，Zotero使用<a href=http://zotfile.com/>Zotfile</a>插件。就我自己而言，Joplin用了OneDrive，在手机上同步比起SyncThing更方便一些；Zotero那边，我自建了WebDAV服务，这纯粹是因为那时候我还没找到插件。&#160;<a href=#fnref:1 class=footnote-backref role=doc-backlink>&#8617;&#xfe0e;</a></p></li><li id=fn:2><p>其实是<a href=https://schinagl.priv.at/nt/hardlinkshellext/hardlinkshellext.html#junctions>Junction</a>，对于应用来说完全透明，两边的文件是完全一样的。&#160;<a href=#fnref:2 class=footnote-backref role=doc-backlink>&#8617;&#xfe0e;</a></p></li></ol></div></div></section></article></main><div class="w-full h-0 flex-none order-3"></div><aside role=contentinfo class="w-full md:w-2/5 xl:w-1/2 md:pr-12 lg:pr-20 xl:pr-24 order-4 md:order-3 md:sticky md:bottom-0 self-end max-w-2xl"><div class="md:float-right md:text-right leading-loose tracking-tight md:mb-2"><div class="md:max-w-xs flex flex-col md:items-end"><ul class="font-serif flex-grow-0 flex justify-between flex-wrap md:flex-col"><li class="px-1 md:px-0"><a href=/post/ title="归档 page">归档</a></li><li class="px-1 md:px-0"><a href=/categories/ title="分类 page">分类</a></li><li class="px-1 md:px-0"><a href=/tags/ title="标签 page">标签</a></li><li class="px-1 md:px-0"><a href=/about/ title="关于 page">关于</a></li><li class="px-1 md:px-0"><a href=/wallet/ title="云乞讨 page">云乞讨</a></li><li class="px-1 md:px-0"><a href=/sentences/ title="内心戏 page">内心戏</a></li><li class="px-1 md:px-0"><a href=https://heysh.xyz/ title="芽 page">芽</a></li><div id=fastSearch class=m-0><input id=searchInput type=text size=10 class="bg-gray-100 focus:outline-none border-b border-gray-100 focus:border-eucalyptus-300 md:text-right
placeholder-java-500 min-w-0 max-w-xxxs" placeholder=search><ul id=searchResults class="bg-gray-200 px-2 divide-y divide-gray-400"></ul></div></ul><div class="flex flex-wrap-reverse md:justify-end content-end md:content-start justify-start items-start max-h-16"><a href=https://github.com/heyeshuang target=_blank class="github icon pl-1 text-eucalyptus-400 hover:text-java-400" title="github link" rel=noopener aria-label="follow on github——Opens in a new window"><div class="fill-current h-8 w-8"><svg viewBox="0 0 24 24"><g><path fill="none" d="M0 0h24v24H0z"/><path fill-rule="nonzero" d="M5.883 18.653c-.3-.2-.558-.455-.86-.816a50.32 50.32.0 01-.466-.579c-.463-.575-.755-.84-1.057-.949a1 1 0 01.676-1.883c.752.27 1.261.735 1.947 1.588-.094-.117.34.427.433.539.19.227.33.365.44.438.204.137.587.196 1.15.14.023-.382.094-.753.202-1.095C5.38 15.31 3.7 13.396 3.7 9.64c0-1.24.37-2.356 1.058-3.292-.218-.894-.185-1.975.302-3.192a1 1 0 01.63-.582c.081-.024.127-.035.208-.047.803-.123 1.937.17 3.415 1.096A11.731 11.731.0 0112 3.315c.912.0 1.818.104 2.684.308 1.477-.933 2.613-1.226 3.422-1.096.085.013.157.03.218.05a1 1 0 01.616.58c.487 1.216.52 2.297.302 3.19.691.936 1.058 2.045 1.058 3.293.0 3.757-1.674 5.665-4.642 6.392.125.415.19.879.19 1.38a300.492 300.492.0 01-.012 2.716 1 1 0 01-.019 1.958c-1.139.228-1.983-.532-1.983-1.525l.002-.446.005-.705c.005-.708.007-1.338.007-1.998.0-.697-.183-1.152-.425-1.36-.661-.57-.326-1.655.54-1.752 2.967-.333 4.337-1.482 4.337-4.66.0-.955-.312-1.744-.913-2.404a1 1 0 01-.19-1.045c.166-.414.237-.957.096-1.614l-.01.003c-.491.139-1.11.44-1.858.949a1 1 0 01-.833.135A9.626 9.626.0 0012 5.315c-.89.0-1.772.119-2.592.35a1 1 0 01-.83-.134c-.752-.507-1.374-.807-1.868-.947-.144.653-.073 1.194.092 1.607a1 1 0 01-.189 1.045C6.016 7.89 5.7 8.694 5.7 9.64c0 3.172 1.371 4.328 4.322 4.66.865.097 1.201 1.177.544 1.748-.192.168-.429.732-.429 1.364v3.15c0 .986-.835 1.725-1.96 1.528a1 1 0 01-.04-1.962v-.99c-.91.061-1.662-.088-2.254-.485z"/></g></svg></div></a><a href=https://twitter.com/heyeshuang target=_blank class="twitter icon pl-1 text-eucalyptus-400 hover:text-java-400" title="twitter link" rel=noopener aria-label="follow on twitter——Opens in a new window"><div class="fill-current h-8 w-8"><svg viewBox="0 0 24 24"><g><path fill="none" d="M0 0h24v24H0z"/><path fill-rule="nonzero" d="M15.3 5.55a2.9 2.9.0 00-2.9 2.847l-.028 1.575a.6.6.0 01-.68.583l-1.561-.212c-2.054-.28-4.022-1.226-5.91-2.799-.598 3.31.57 5.603 3.383 7.372l1.747 1.098a.6.6.0 01.034.993L7.793 18.17c.947.059 1.846.017 2.592-.131 4.718-.942 7.855-4.492 7.855-10.348.0-.478-1.012-2.141-2.94-2.141zm-4.9 2.81a4.9 4.9.0 018.385-3.355c.711-.005 1.316.175 2.669-.645-.335 1.64-.5 2.352-1.214 3.331.0 7.642-4.697 11.358-9.463 12.309-3.268.652-8.02-.419-9.382-1.841.694-.054 3.514-.357 5.144-1.55C5.16 15.7-.329 12.47 3.278 3.786c1.693 1.977 3.41 3.323 5.15 4.037 1.158.475 1.442.465 1.973.538z"/></g></svg></div></a></div><div class="text-sm text-gray-500 leading-tight a-gray">&copy;贺叶霜，<a href=https://creativecommons.org/licenses/by-sa/4.0/deed.zh>CC BY-SA</a><br>Built with Hugo and theme <a href=https://github.com/heyeshuang/hugo-theme-tokiwa>Tokiwa</a>. 2520 words in this page.</div></div></div></aside><footer class="w-full md:w-3/5 xl:w-1/2 order-3 max-w-3xl md:order-4 pt-2"><hr class=double-line><div class="flex flex-wrap justify-between pb-2 leading-loose font-serif"><a class=flex-grow-0 href=/2022/03/04/new-tablet/><svg class="fill-current inline-block h-4 w-4" viewBox="0 0 24 24" width="24" height="24"><path fill="none" d="M0 0h24v24H0z"/><path d="M7.828 11H20v2H7.828l5.364 5.364-1.414 1.414L4 12l7.778-7.778 1.414 1.414z"/></svg>
整了个“新”平板
</a><a class=flex-grow-0 href=/2022/12/15/zhuangxiaomi-download-images/>下载装小蜜监理拍摄的图片<svg class="fill-current inline-block h-4 w-4" viewBox="0 0 24 24" width="24" height="24"><path fill="none" d="M0 0h24v24H0z"/><path d="M16.172 11l-5.364-5.364 1.414-1.414L20 12l-7.778 7.778-1.414-1.414L16.172 13H4v-2z"/></svg></a></div><div><div class="font-serif pb-2 flex align-start leading-loose"><span class="heading pr-6 leading-loose">Related</span>
<span><a href=/2021/07/20/beyond-nat/>你可能并不需要内网穿透</a>&nbsp;&nbsp;/&nbsp;
<a href=/2018/11/17/which-notebook/>笔记软件踩雷</a></span></div></div><hr><div class=pb-2><div id=disqus_thread></div><script>window.disqus_config=function(){},function(){if(["localhost","127.0.0.1"].indexOf(window.location.hostname)!=-1){document.getElementById("disqus_thread").innerHTML="Disqus comments not available by default when the website is previewed locally.";return}var t=document,e=t.createElement("script");e.async=!0,e.src="//heysh.disqus.com/embed.js",e.setAttribute("data-timestamp",+new Date),(t.head||t.body).appendChild(e)}()</script><noscript>Please enable JavaScript to view the <a href=https://disqus.com/?ref_noscript>comments powered by Disqus.</a></noscript><a href=https://disqus.com class=dsq-brlink>comments powered by <span class=logo-disqus>Disqus</span></a></div><hr></footer><script src=/dist/app.js></script><script src=/lib/fuse.min.js></script><script src=/lib/fastsearch.js></script></div></body></html>